Perfect â€” hereâ€™s your **final, polished prompt** ready to paste directly into **Replit** (or any AI coding workspace) to build your full-stack prototype of **City Safety Radar â€” Mumbai**.
It includes your full app description **plus** the `compute_safety_score()` function integrated neatly at the end.

---

## ğŸ’» Prompt to Send to Replit

---

**Build a full-stack AI-powered web app called "City Safety Radar â€” Mumbai".**

---

### ğŸ¯ GOAL:

Create a real-time **Safety Heatmap of Mumbai** that shows safety levels for different areas and provides the **safest route** between two locations.

---

### ğŸ§© TECH STACK:

* **Frontend:** React + Mapbox (or Leaflet) + TailwindCSS
* **Backend:** Python (FastAPI)
* **Database:** Firebase / MongoDB (mock data fine)
* **APIs:** OpenWeatherMap, Google Maps, Twitter/X API *(simulated)*
* **AI Models:**

  * NLP (for safety mentions â†’ pre-trained BERT sentiment model or placeholder)
  * CV (simulated crowd density data)
  * Fusion model (average lighting + crowd + NLP score)

---

### ğŸ’¡ FEATURES TO IMPLEMENT:

#### 1. Live Safety Heatmap

* Mumbai map divided into regions.
* Each region shows a **Safety Score (0â€“100)**:

  * ğŸ”´ **Unsafe (<40)**
  * ğŸŸ¡ **Moderate (40â€“70)**
  * ğŸŸ¢ **Safe (>70)**
* Auto-updates every few seconds using simulated data.

#### 2. AI-Based Safety Scoring

Backend endpoint `/safety-score` calculates safety score based on:

* Lighting (simulated)
* Crowd density (mock camera data)
* Recent incident reports (mock JSON)
* NLP sentiment (mocked or random)

Returns JSON like:

```json
{ 
  "area": "Andheri", 
  "score": 82, 
  "crowd": 45, 
  "lighting": 80, 
  "recent_incidents": 1 
}
```

#### 3. AI Route Planner

* Inputs: Source + Destination (Mumbai locations)
* Output: **Safest route**, not shortest

  * Uses Google Maps directions
  * Avoids low-score regions
  * Weighted by safety score

#### 4. Live Alerts Panel

* Shows real-time alerts such as:

  > â€œIncident detected near Andheri â€” low lighting and sparse crowd.â€
* Auto-refresh or WebSocket simulation.

#### 5. User Reports

* Users can manually report unsafe areas or incidents.
* Submissions update the map temporarily.

#### 6. Privacy Note

* Banner:

  > â€œAll camera feeds anonymized. No personal tracking.â€

---

### ğŸ§  OPTIONAL ADD-ONS:

* Predictive safety (simulate time-series)
* Chatbot: â€œIs Bandra safe right now?â€
* Safety forecast chart (Chart.js)

---

### âš™ FUNCTIONAL REQUIREMENTS:

**Backend (FastAPI) routes:**

* `/safety-score`
* `/get-heatmap`
* `/get-route`
* `/post-alert`

**Frontend:**

* Map view (Mumbai default zoom)
* Side panel: Live alerts + user reports
* Route planner UI (Source â†’ Destination)
* Legend for color-coded safety levels

**Data:**
Use mock JSON or randomly generated safety data for now.

**AI Placeholder:**
Keep functions modular so real AI can be integrated later.

---

### ğŸ“¦ FOLDER STRUCTURE:

```
city-safety-radar/
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”œâ”€â”€ safety.py
â”‚   â”‚   â”œâ”€â”€ route.py
â”‚   â”‚   â”œâ”€â”€ alerts.py
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ ai_scorer.py
â”‚   â”‚   â”œâ”€â”€ nlp_model.py
â”‚   â”‚   â”œâ”€â”€ cv_model.py
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ safety_data.json
â”‚   â”‚   â”œâ”€â”€ incidents.json
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ MapView.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RoutePlanner.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AlertPanel.jsx
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ README.md
```

---

### ğŸ¨ DESIGN STYLE:

* Dark mode dashboard
* Neon accent colors for unsafe zones
* Floating cards for route & alerts
* Responsive layout
* â€œCity-tech radarâ€ aesthetic

---

### ğŸš€ DELIVERABLE:

A working prototype that:
âœ… Displays Mumbai safety heatmap (auto-refreshing)
âœ… Shows AI-based safest route between two points
âœ… Has live alerts & user reports panel
âœ… Uses mock AI with modular design

---

### ğŸ§® SAFETY SCORE FORMULA (include in backend `/models/ai_scorer.py`)

```python
def compute_safety_score(data, prev_score=70):
    L = min(data["lighting"] / 100, 1)
    C = min(data["crowd_density"] / 50, 1)
    I = 1 - min(data["incidents_24h"] / 10, 1)
    S = (data["sentiment"] + 1) / 2
    W = 1 - data["weather_risk"]
    P = 1 if data["police_nearby"] else 0.7
    T = 1 - data["night_factor"]

    raw = 100 * (0.20*L + 0.15*C + 0.25*I + 0.15*S + 0.10*W + 0.05*P + 0.10*T)
    final = 0.7*raw + 0.3*prev_score
    return round(final, 2)
```

---

### ğŸ§  TIP:

Start backend first (FastAPI routes + mock JSON),
then integrate frontend React components step by step.

---

Would you like me to generate **the actual backend FastAPI code files** (with mock endpoints `/safety-score`, `/get-heatmap`, etc.) and **frontend React skeleton** so you can upload directly to Replit next?
